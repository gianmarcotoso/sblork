!function(a,b,c,d){var e=function(a){this.name=a,e._instances[this.name]=this,this.define("EventManager",new e.EventManager(this)),this.define("Router",new e.Router(this))};e.start=function(a,b){if(!e._instances||!e._instances[a])return null;var c=e._instances[a];return c.bootstrap(b),c},e.prototype.bootstrap=function(a){console.log("Booting application "+this.name+"..."),a&&b.isFunction(a)&&a.apply(this)},e.prototype.registerController=function(a,b){return this._controllers||(this._controllers={}),this._controllers[a]=new b,this._controllers[a]},e.prototype.registerControllers=function(a){this._controllers||(this._controllers={}),b.each(a,function(a,b){this._controllers[b]=new a}.bind(this))},e.prototype.getController=function(a){return this._controllers&&this._controllers[a]?this._controllers[a]:null},e.prototype.registerViewContainer=function(a,c){this._viewContainers||(this._viewContainers={});var e=d("[data-container-role="+c+"]");e.makeView=function(a,c){return a=b.extend({},a),c=c||"div",d("<"+c+">").attr(a).appendTo(e)},this._viewContainers[a]=e},e.prototype.getViewContainer=function(a){return this._viewContainers&&this._viewContainers[a]?this._viewContainers[a]:null},e.getInstance=function(a){return e._instances||(e._instances={}),e._instances[a]||(e._instances[a]=new e(a)),e._instances[a]},e.prototype.define=function(a,b){this._modules||(this._modules={}),this._modules[a]=b},e.prototype.require=function(a){if(!this._modules[a])throw"The module "+a+" is not defined on instance "+this.name;return this._modules[a]},a.Sblork=e}(this,this._,this.Backbone,this.jQuery),function(a,b){a.EventManager=function(){var a=_.extend({},b.Events);return a}}(this.Sblork,this.Backbone),function(a,b,c){a.Router=function(a){var d=b.Router.extend({}),e=a.require("EventManager");return d.prototype.fireRoute=function(a,b,c){this._currentController&&this._currentController.stop(),b&&(this._currentController=b),e.trigger("RouteChange",a),c.apply(b?b:this)},d.prototype.addRoute=function(a,b,c){this.route(a,b),c&&this.addAction(b,c)},d.prototype.setRoutes=function(a){this.off(),c.each(a,function(a,b){this.addRoute(b,a.route,a.action)}.bind(this)),b.history.start()},d.prototype.addAction=function(b,d){if(c.isFunction(d))return void this.on("route:"+b,function(){this.fireRoute.apply(a,[b,null,d])},this);var e=a.getController(d);if(e)return void this.on("route:"+b,function(){this.fireRoute.apply(a,[b,e,e.start])},this);throw"Unable to add controller action: unspecified behavior (action is neither a callback nor a controller)"},new d}}(this.Sblork,this.Backbone,this._);